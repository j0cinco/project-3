<!DOCTYPE html>
<html>
<head>
    <title>Spotify's Greatest Analysis</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='layout.css') }}">
    <script src="https://d3js.org/d3.v4.js"></script>
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
    <script src="https://cdn.anychart.com/js/8.0.1/anychart-core.min.js"></script>
    <script src="https://cdn.anychart.com/js/8.0.1/anychart-pie.min.js"></script>
</head>
<body>
    <video autoplay muted loop id="myVideo">
        <source src="{{ url_for('static', filename='videos/background.mp4') }}" type="video/mp4">
    </video>


    <section>
        <div class="sidenav">
            <a href="Data">Data</a>
            <a href="Pop">Pop</a>
            <a href="HipHop">Hip Hop</a>
            <a href="Country">Country</a>
            <a href="IndiePop">Indie Pop</a>
            <a onclick="update(data1)">Variable 1</a>
            <a onclick="update(data2)">Variable 2</a>

        </div>
            
    
        <div class="container">
            <div class="box" id="my_dataviz1"></div>
            <div class="box" id="my_dataviz"></div>
        </div>
    </section>

<script>
    var data1 = [
    {group: "A", value: 4},
    {group: "B", value: 16},
    {group: "C", value: 8}
 ];
 
 var data2 = [
    {group: "A", value: 7},
    {group: "B", value: 1},
    {group: "C", value: 20}
 ];
 
 // set the dimensions and margins of the graph
 var margin = {top: 30, right: 30, bottom: 70, left: 60},
     width = 460 - margin.left - margin.right,
     height = 400 - margin.top - margin.bottom;
 
 // append the svg object to the body of the page
 var svg1 = d3.select("#my_dataviz1")
   .append("svg")
     .attr("width", width + margin.left + margin.right)
     .attr("height", height + margin.top + margin.bottom)
   .append("g")
     .attr("transform",
           "translate(" + margin.left + "," + margin.top + ")");
 
 // X axis
 var x = d3.scaleBand()
   .range([ 0, width ])
   .domain(data1.map(function(d) { return d.group; }))
   .padding(0.2);
 svg1.append("g")
   .attr("transform", "translate(0," + height + ")")
   .call(d3.axisBottom(x))
 
 // Add Y axis
 var y = d3.scaleLinear()
   .domain([0, 20])
   .range([ height, 0]);
 svg1.append("g")
   .attr("class", "myYaxis")
   .call(d3.axisLeft(y));
 
 // A function that creates / updates the plot for the first graph:
 function update(data) {
 
   var u = svg1.selectAll("rect")
     .data(data)
 
   u.enter()
     .append("rect")
     .merge(u)
     .transition()
     .duration(1000)
       .attr("x", function(d) { return x(d.group); })
       .attr("y", function(d) { return y(d.value); })
       .attr("width", x.bandwidth())
       .attr("height", function(d) { return height - y(d.value); })
       .attr("fill", "#69b3a2")
 }
 
 // Initialize the plot with the first dataset
 update(data1);
 
</script>

<script>
    var width = 450,
    height = 450,
    margin = 40;

// The radius of the pie plot is half the width or half the height (the smallest dimension). Subtract a bit of margin.
var radius = Math.min(width, height) / 2 - margin;

// append the svg object to the div called 'my_dataviz'
var svg2 = d3.select("#my_dataviz")
  .append("svg")
    .attr("width", width)
    .attr("height", height)
  .append("g")
    .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

// create 2 data sets
var data3 = {a: 9, b: 20, c: 30, d: 8, e: 12};
var data4 = {a: 6, b: 16, c: 20, d: 14, e: 19, f: 12};

// set the color scale
var color = d3.scaleOrdinal()
  .domain(["a", "b", "c", "d", "e", "f"])
  .range(d3.schemeDark2);

// A function that creates / updates the plot for the second graph:
function update2(data) {
  // Compute the position of each group on the pie
  var pie = d3.pie()
    .value(function(d) { return d.value; })
    .sort(function(a, b) { console.log(a); return d3.ascending(a.key, b.key); }); // This ensures that group order remains the same in the pie chart
  var data_ready = pie(d3.entries(data));

  // map to data
  var t = svg2.selectAll("path")
    .data(data_ready);

  // Build the pie chart: Each part of the pie is a path built using the arc function
  t.enter()
    .append("path")
    .merge(t)
    .transition()
    .duration(1000)
    .attr("d", d3.arc()
      .innerRadius(0)
      .outerRadius(radius)
    )
    .attr("fill", function(d) { return color(d.data.key); })
    .attr("stroke", "white")
    .style("stroke-width", "2px")
    .style("opacity", 1);

  // Remove the group that is not present anymore
  t.exit()
    .remove();
}

// Initialize the plot with the first dataset for the second graph
update2(data3);

</script>


</body>
</html>